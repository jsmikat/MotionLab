const M = "0.865865 0.500278 -0.871576 0.490261";
const HIT_AREA = "182.68,21.22 458.89,180.81 278.48,282.30 2.27,122.71";

/* Puzzle piece path data for each piece at each layer offset */
const BOTTOM = {
  shadow:
    "M296.672 190.521L277.622 179.515C285.324 175.183 285.365 168.087 277.714 163.667C270.063 159.246 257.617 159.174 249.915 163.506L230 152L201.238 168.179C208.889 172.599 208.848 179.695 201.147 184.027C193.445 188.359 180.999 188.288 173.348 183.867L144.586 200.046L211.257 238.567L240.019 222.388C232.368 217.968 232.409 210.872 240.11 206.54C247.812 202.207 260.258 202.279 267.91 206.7L296.672 190.521Z",
  main: "M296.672 186.521L277.623 175.515C285.324 171.183 285.365 164.087 277.714 159.667C270.063 155.246 257.617 155.174 249.915 159.506L230 148L201.238 164.179C208.889 168.599 208.848 175.695 201.147 180.027C193.445 184.36 180.999 184.288 173.348 179.867L144.586 196.046L211.257 234.567L240.019 218.388C232.368 213.968 232.409 206.872 240.111 202.54C247.812 198.208 260.258 198.279 267.91 202.7L296.672 186.521Z",
  raisedShadow:
    "M296.672 178.522L277.623 167.515C285.324 163.183 285.365 156.088 277.714 151.667C270.063 147.246 257.617 147.174 249.915 151.507L230 140L201.238 156.179C208.889 160.6 208.848 167.695 201.147 172.027C193.445 176.36 180.999 176.288 173.348 171.867L144.586 188.046L211.257 226.567L240.019 210.389C232.368 205.968 232.409 198.872 240.111 194.54C247.812 190.208 260.258 190.279 267.91 194.7L296.672 178.522Z",
  raised:
    "M296.672 174.522L277.623 163.515C285.324 159.183 285.365 152.088 277.714 147.667C270.063 143.246 257.617 143.174 249.915 147.507L230 136L201.238 152.179C208.889 156.6 208.848 163.695 201.147 168.027C193.445 172.36 180.999 172.288 173.348 167.867L144.586 184.046L211.257 222.567L240.019 206.389C232.368 201.968 232.409 194.872 240.111 190.54C247.812 186.208 260.258 186.279 267.91 190.7L296.672 174.522Z",
};

const TOP = {
  shadow:
    "M315.414 103.954L190.73 31.9144C185.948 29.1514 178.169 29.1066 173.355 31.8142L96.6567 74.9572L115.706 85.9633C108.004 90.2955 107.963 97.3912 115.614 101.812C123.266 106.233 135.712 106.304 143.413 101.972L182.377 124.485C190.079 120.152 202.525 120.224 210.176 124.645C217.828 129.066 217.787 136.161 210.085 140.494L230 152L258.762 135.821C266.413 140.242 278.859 140.314 286.561 135.982C294.263 131.649 294.304 124.554 286.652 120.133L315.414 103.954Z",
  main: "M315.414 99.9544L190.73 27.9144C185.948 25.1514 178.169 25.1066 173.355 27.8142L96.6568 70.9572L115.706 81.9633C108.004 86.2955 107.963 93.3912 115.614 97.8119C123.266 102.233 135.712 102.304 143.413 97.9722L182.377 120.485C190.079 116.152 202.525 116.224 210.176 120.645C217.828 125.066 217.787 132.161 210.085 136.494L230 148L258.762 131.821C266.413 136.242 278.859 136.314 286.561 131.982C294.263 127.649 294.304 120.554 286.652 116.133L315.414 99.9544Z",
  raised:
    "M315.414 95.9544L190.73 23.9144C185.948 21.1514 178.169 21.1066 173.355 23.8142L96.6568 66.9572L115.706 77.9633C108.004 82.2955 107.963 89.3912 115.614 93.8119C123.266 98.2327 135.712 98.3044 143.413 93.9722L182.377 116.485C190.079 112.152 202.525 112.224 210.176 116.645C217.828 121.066 217.787 128.161 210.085 132.494L230 144L258.762 127.821C266.413 132.242 278.859 132.314 286.561 127.982C294.263 123.649 294.304 116.554 286.652 112.133L315.414 95.9544Z",
};

const LEFT = {
  shadow:
    "M210.176 124.645C217.828 129.066 217.787 136.161 210.085 140.494L230 152L201.238 168.179C208.889 172.599 208.848 179.695 201.147 184.027C193.445 188.359 180.999 188.288 173.347 183.867L144.586 200.046L19.9009 128.006C15.1189 125.243 15.1445 120.808 19.958 118.1L96.6567 74.9572L115.706 85.9633C108.004 90.2955 107.963 97.3912 115.614 101.812C123.266 106.233 135.712 106.304 143.413 101.972L182.377 124.485C190.079 120.152 202.525 120.224 210.176 124.645Z",
  main: "M210.176 120.645C217.828 125.066 217.787 132.161 210.085 136.494L230 148L201.238 164.179C208.889 168.599 208.848 175.695 201.147 180.027C193.445 184.359 180.999 184.288 173.348 179.867L144.586 196.046L19.901 124.006C15.119 121.243 15.1445 116.808 19.9581 114.1L96.6568 70.9572L115.706 81.9633C108.004 86.2955 107.963 93.3912 115.614 97.8119C123.266 102.233 135.712 102.304 143.413 97.9722L182.377 120.485C190.079 116.152 202.525 116.224 210.176 120.645Z",
  raised:
    "M210.176 116.645C217.828 121.066 217.787 128.161 210.085 132.494L230 144L201.238 160.179C208.889 164.599 208.848 171.695 201.147 176.027C193.445 180.359 180.999 180.288 173.348 175.867L144.586 192.046L19.901 120.006C15.1189 117.243 15.1445 112.808 19.9581 110.1L96.6567 66.9572L115.706 77.9633C108.004 82.2955 107.963 89.3912 115.614 93.8119C123.266 98.2327 135.712 98.3044 143.413 93.9722L182.377 116.485C190.079 112.152 202.525 112.224 210.176 116.645Z",
};

const RIGHT = {
  shadow:
    "M440.042 185.9C444.855 183.192 444.881 178.757 440.099 175.994L315.414 103.954L286.652 120.133C294.304 124.554 294.263 131.649 286.561 135.982C278.859 140.314 266.413 140.242 258.762 135.821L230 152L249.915 163.506C257.617 159.174 270.063 159.246 277.714 163.667C285.365 168.087 285.324 175.183 277.622 179.515L316.586 202.028C308.885 206.36 308.844 213.456 316.495 217.876C324.146 222.297 336.592 222.369 344.294 218.037L363.343 229.043L440.042 185.9Z",
  main: "M440.042 181.9C444.855 179.192 444.881 174.757 440.099 171.994L315.414 99.9543L286.652 116.133C294.303 120.554 294.263 127.649 286.561 131.982C278.859 136.314 266.413 136.242 258.762 131.821L230 148L249.915 159.506C257.616 155.174 270.062 155.246 277.714 159.667C285.365 164.087 285.324 171.183 277.622 175.515L316.586 198.028C308.885 202.36 308.844 209.456 316.495 213.876C324.146 218.297 336.592 218.369 344.294 214.037L363.343 225.043L440.042 181.9Z",
  raised:
    "M440.042 177.9C444.855 175.192 444.881 170.757 440.099 167.994L315.414 95.9543L286.652 112.133C294.303 116.554 294.263 123.649 286.561 127.982C278.859 132.314 266.413 132.242 258.762 127.821L230 144L249.915 155.506C257.616 151.174 270.062 151.246 277.714 155.667C285.365 160.087 285.324 167.183 277.622 171.515L316.586 194.028C308.885 198.36 308.844 205.456 316.495 209.876C324.146 214.297 336.592 214.369 344.294 210.037L363.343 221.043L440.042 177.9Z",
};

const BOTTOM_RIGHT = {
  shadow:
    "M344.294 218.037C336.592 222.369 324.146 222.297 316.495 217.876C308.844 213.456 308.885 206.36 316.586 202.028L296.672 190.521L267.91 206.7C260.258 202.279 247.812 202.207 240.11 206.54C232.409 210.872 232.368 217.968 240.019 222.388L211.257 238.567L269.27 272.085C274.052 274.848 281.831 274.893 286.644 272.186L363.343 229.043L344.294 218.037Z",
  main: "M344.294 214.037C336.593 218.369 324.146 218.297 316.495 213.876C308.844 209.456 308.885 202.36 316.587 198.028L296.672 186.521L267.91 202.7C260.258 198.279 247.812 198.208 240.111 202.54C232.409 206.872 232.368 213.968 240.019 218.388L211.257 234.567L269.27 268.086C274.052 270.849 281.831 270.893 286.645 268.186L363.343 225.043L344.294 214.037Z",
  raised:
    "M344.294 210.037C336.593 214.369 324.146 214.297 316.495 209.876C308.844 205.456 308.885 198.36 316.587 194.028L296.672 182.521L267.91 198.7C260.258 194.279 247.812 194.208 240.111 198.54C232.409 202.872 232.368 209.968 240.019 214.388L211.257 230.567L269.27 264.086C274.052 266.849 281.831 266.893 286.645 264.186L363.343 221.043L344.294 210.037Z",
};

const IsometricCardThird = ({
  isHovered,
  isFaded,
  onMouseEnter,
}: {
  isHovered: boolean;
  isFaded: boolean;
  onMouseEnter: () => void;
}) => {
  const c = isHovered
    ? {
        shadow: "#93c5fd",
        stroke: "#3b82f6",
        bg: "#dbeafe",
        inner: "#eff6ff",
        fill2: "#93c5fd",
        fill3: "#60a5fa",
      }
    : {
        shadow: "#e4e4e7",
        stroke: "#a1a1aa",
        bg: isFaded ? "#f4f4f5" : "#fafafa",
        inner: "#f4f4f5",
        fill2: "#d4d4d8",
        fill3: "#a1a1aa",
      };

  return (
    <svg
      width="460"
      height="300"
      viewBox="0 0 460 300"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      style={{ pointerEvents: "none" }}
    >
      <g style={{ pointerEvents: "auto" }}>
        {/* ── Shadow layer (clipped, y+4) ── */}
        <g clipPath="url(#isoThird0)">
          <rect
            width="320"
            height="208"
            rx="16"
            transform={`matrix(${M} 182.105 20.9684)`}
            fill={c.shadow}
          />
          <path d={BOTTOM.shadow} fill={c.inner} stroke={c.stroke} />
          <path d={TOP.shadow} fill={c.inner} stroke={c.stroke} />
          <path d={LEFT.shadow} fill={c.inner} stroke={c.stroke} />
          <path d={RIGHT.shadow} fill={c.inner} stroke={c.stroke} />
          <path d={BOTTOM_RIGHT.shadow} fill={c.inner} stroke={c.stroke} />
        </g>

        {/* Shadow outer stroke */}
        <rect
          x="-0.00285524"
          y="0.495269"
          width="319"
          height="207"
          rx="15.5"
          transform={`matrix(${M} 182.537 21.2223)`}
          stroke={c.stroke}
          fill="none"
        />

        {/* ── Main layer (clipped, y+0) ── */}
        <g clipPath="url(#isoThird1)">
          <rect
            width="320"
            height="208"
            rx="16"
            transform={`matrix(${M} 182.105 16.9684)`}
            fill={c.bg}
          />
          <path d={BOTTOM.main} fill={c.fill3} stroke={c.stroke} />
          <path d={TOP.main} fill={c.fill2} stroke={c.stroke} />
          <path d={LEFT.main} fill={c.fill2} stroke={c.stroke} />
          <path d={RIGHT.main} fill={c.fill2} stroke={c.stroke} />
          <path d={BOTTOM_RIGHT.main} fill={c.fill2} stroke={c.stroke} />
          {/* Corner patches */}
          <path
            d="M211.379 233.996L211.379 231.123L214.832 233.121L212.125 234.567L211.379 233.996Z"
            fill={c.fill2}
          />
          <path
            d="M359.702 223.599L362.608 221.951L362.653 224.959L361.538 225.549L359.702 223.599Z"
            fill={c.fill2}
          />
        </g>

        {/* Main outer stroke */}
        <rect
          x="-0.00285524"
          y="0.495269"
          width="319"
          height="207"
          rx="15.5"
          transform={`matrix(${M} 182.537 17.2223)`}
          stroke={c.stroke}
          fill="none"
        />

        {/* ── Raised pieces ── */}
        <path d={TOP.raised} fill={c.bg} stroke={c.stroke} />
        <path d={LEFT.raised} fill={c.bg} stroke={c.stroke} />
        <path d={RIGHT.raised} fill={c.bg} stroke={c.stroke} />
        <path d={BOTTOM_RIGHT.raised} fill={c.bg} stroke={c.stroke} />

        {/* Bottom piece shadow + main */}
        <path d={BOTTOM.raisedShadow} fill={c.fill2} stroke={c.stroke} />
        <path d={BOTTOM.raised} fill={c.inner} stroke={c.stroke} />

        {/* Corner patches */}
        <path
          d="M144.716 184.615L148.236 186.646L145.778 188.263L144.716 187.582L144.716 184.615Z"
          fill={c.fill2}
        />
        <path
          d="M236.812 208.68L239.897 206.963L239.897 209.932L239.031 210.475L236.812 208.68Z"
          fill={c.fill2}
        />
        <path
          d="M293.094 177.024L296.5 175.117L296.5 178.115L295.685 178.588L293.094 177.024Z"
          fill={c.fill2}
        />
        <path
          d="M201.383 152.784C202.593 153.581 203.25 154.042 204.153 155.04L202.116 156.183C201.854 155.945 201.694 155.817 201.383 155.599L201.383 152.784Z"
          fill={c.fill2}
        />

        {/* Vertical connector lines */}
        <line
          x1="144.539"
          y1="195.79"
          x2="144.539"
          y2="191.79"
          stroke={c.stroke}
        />
        <line
          x1="144.23"
          y1="188.029"
          x2="144.23"
          y2="184.029"
          stroke={c.stroke}
        />
        <line
          x1="200.901"
          y1="156.157"
          x2="200.901"
          y2="152.157"
          stroke={c.stroke}
        />
        <line
          x1="211.198"
          y1="226.423"
          x2="211.198"
          y2="222.423"
          stroke={c.stroke}
        />
        <line
          x1="363.119"
          y1="225.142"
          x2="363.119"
          y2="221.142"
          stroke={c.stroke}
        />
        <line
          x1="240.382"
          y1="210.396"
          x2="240.382"
          y2="206.396"
          stroke={c.stroke}
        />
        <line
          x1="267.995"
          y1="194.532"
          x2="267.995"
          y2="190.532"
          stroke={c.stroke}
        />
        <line
          x1="296.995"
          y1="178.532"
          x2="296.995"
          y2="174.532"
          stroke={c.stroke}
        />
        <line
          x1="210.873"
          y1="234.567"
          x2="210.873"
          y2="230.567"
          stroke={c.stroke}
        />

        {/* Hit area */}
        <polygon
          points={HIT_AREA}
          fill="transparent"
          style={{ cursor: "pointer" }}
          onMouseEnter={onMouseEnter}
        />

        <defs>
          <clipPath id="isoThird0">
            <rect
              width="320"
              height="208"
              rx="16"
              transform={`matrix(${M} 182.105 20.9684)`}
              fill="white"
            />
          </clipPath>
          <clipPath id="isoThird1">
            <rect
              width="320"
              height="208"
              rx="16"
              transform={`matrix(${M} 182.105 16.9684)`}
              fill="white"
            />
          </clipPath>
        </defs>
      </g>
    </svg>
  );
};

export default IsometricCardThird;
